# ========================================
# Configuration Pi4 Standalone
# ========================================
# Copier ce fichier vers .env pour l'utiliser :
#   cp .env.pi4 .env
#
# Architecture:
# - Raspberry Pi 4 (4GB RAM)
# - Freebox Pop (IP résidentielle)
# - Pas de Synology (SQLite local)
#
# Services:
# - Bot Worker (LinkedIn automation)
# - Dashboard (Next.js sur port 3000)
# - Redis x2 (queue bot + cache dashboard)

# ========================================
# API SECURITY
# ========================================
# Clé API pour sécuriser la communication entre Dashboard et API
# ⚠️  CRITIQUE: NE PAS utiliser "internal_secret_key" en production
# ⚠️  Générer une clé forte (64 caractères minimum) avec:
#     python -c "import secrets; print(secrets.token_hex(32))"
#
# IMPORTANT: Le bot refuse de démarrer si cette valeur n'est pas changée
API_KEY=CHANGEZ_MOI_PAR_CLE_FORTE_GENERER_AVEC_COMMANDE_CI_DESSUS

# ========================================
# DASHBOARD
# ========================================
# Port d'accès au dashboard (défaut: 3000)
DASHBOARD_PORT=3000

# ⚠️  AUTHENTIFICATION DASHBOARD (OBLIGATOIRE)
# Sans ces variables, vous verrez "Erreur de connexion au serveur" lors du login
# JWT Secret pour les sessions (minimum 32 caractères)
# Générer avec: openssl rand -hex 32
JWT_SECRET=CHANGEZ_MOI_PAR_SECRET_JWT_GENERER_AVEC_OPENSSL

# ✅ Clé de chiffrement pour auth_state.json (NOUVEAU - SÉCURITÉ)
# Génère automatiquement par setup.sh ou manuellement avec:
#   python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# ⚠️  CRITIQUE: Ne JAMAIS partager cette clé! Les cookies LinkedIn sont chiffrés avec.
AUTH_ENCRYPTION_KEY=CHANGEZ_MOI_PAR_CLE_FERNET_GENEREE_AUTOMATIQUEMENT

# Identifiants de connexion au dashboard
# Ces valeurs seront utilisées pour se connecter à http://PI4_IP:3000
DASHBOARD_USER=admin
DASHBOARD_PASSWORD=CHANGEZ_MOI_PAR_MOT_DE_PASSE_FORT

# Base de données SQLite (partagée bot + dashboard)
DATABASE_URL=sqlite:///app/data/linkedin.db

# Redis Dashboard (cache)
REDIS_URL=redis://redis-dashboard:6379

# Désactiver la télémétrie Next.js
NEXT_TELEMETRY_DISABLED=1

# ========================================
# CORS SECURITY (API)
# ========================================
# Origines autorisées pour les requêtes CORS (séparer par virgule sans espaces)
# ⚠️  IMPORTANT: Ajouter UNIQUEMENT les domaines de confiance
# Exemples:
# - Accès local: http://localhost:3000,http://192.168.1.50:3000
# - Avec domaine Freebox: http://localhost:3000,https://gaspardanoukolivier.freeboxos.fr
ALLOWED_ORIGINS=http://localhost:3000,http://192.168.1.50:3000

# ========================================
# BOT WORKER
# ========================================
# Redis Queue (pour RQ Worker)
REDIS_HOST=redis-bot
REDIS_PORT=6379

# Niveau de logs (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Chemin Python
PYTHONPATH=/app

# ========================================
# NOTIFICATIONS EMAIL (OPTIONNEL)
# ========================================
# Configuration SMTP pour les notifications par email
# Les notifications sont désactivées par défaut et peuvent être activées via le dashboard

# Hôte SMTP (exemples: smtp.gmail.com, smtp.office365.com)
SMTP_HOST=smtp.gmail.com

# Port SMTP (587 pour TLS, 465 pour SSL)
SMTP_PORT=587

# Utiliser TLS/STARTTLS (true/false)
SMTP_USE_TLS=true

# Identifiants SMTP
# Pour Gmail: utilisez un mot de passe d'application (https://support.google.com/accounts/answer/185833)
SMTP_USER=votre.email@gmail.com
SMTP_PASSWORD=votre_mot_de_passe_application

# Adresse email d'envoi (généralement la même que SMTP_USER)
SMTP_FROM_EMAIL=votre.email@gmail.com

# ========================================
# CONFIGURATION NAVIGATEUR
# ========================================
# Mode headless (obligatoire sur Pi4 sans écran)
HEADLESS=true

# Arguments Puppeteer (si utilisé dans le dashboard)
PUPPETEER_ARGS=--no-sandbox,--disable-setuid-sandbox,--disable-dev-shm-usage,--disable-gpu

# ========================================
# RÉSEAU (Freebox Pop)
# ========================================
# IP fixe recommandée sur la Freebox (via DHCP statique)
# Exemple: 192.168.1.50 (à configurer dans l'interface Freebox)
# PI4_IP=192.168.1.50

# ========================================
# LIMITES RESSOURCES PI4 (4GB RAM)
# ========================================
# Ces valeurs sont définies dans docker-compose.pi4-standalone.yml
# Bot Worker: 900MB max
# Dashboard: 400MB max
# API: 500MB max
# Redis Bot: 300MB max
# Redis Dashboard: 100MB max
# ─────────────────
# Total: ~2.2GB / 4GB (55%)
# Laisse ~1.8GB pour le système

# ========================================
# NOTES
# ========================================
# 1. Accès dashboard depuis le réseau local:
#    http://192.168.1.50:3000 (remplacer par l'IP de votre Pi4)
#
# 2. Vérifier que le Pi4 a une IP fixe sur la Freebox:
#    Interface Freebox > Paramètres réseau > DHCP statique
#
# 3. Pour accès externe sécurisé, utiliser Wireguard VPN
#    (cf. SETUP_PI4_SYNOLOGY_FREEBOX.md section VPN)
#
# 4. Données persistantes stockées dans:
#    - ./data/linkedin.db (SQLite)
#    - ./logs/ (logs bot + dashboard)
#    - Docker volumes: redis-bot-data, redis-dashboard-data

# ========================================
# NGINX & SSL
# ========================================
# Domaine pour la configuration automatique Nginx et certificats SSL
# Ce domaine sera utilisé pour:
# - Générer les certificats SSL (auto-signés ou Let's Encrypt)
# - Configurer le serveur Nginx
# - Accès HTTPS: https://gaspardanoukolivier.freeboxos.fr
#
# IMPORTANT: Pour Let's Encrypt, ce domaine DOIT pointer vers votre IP publique
# Pour tester en local, utiliser un domaine .local ou IP directe
DOMAIN=gaspardanoukolivier.freeboxos.fr
