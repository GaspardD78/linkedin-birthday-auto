# ═══════════════════════════════════════════════════════════════════
# Configuration LinkedIn Birthday Auto Bot
# Version 2.0.1 - Optimisée pour Raspberry Pi 4 (4GB RAM)
# ═══════════════════════════════════════════════════════════════════

# Métadonnées
version: 2.0.1

# Mode de fonctionnement
# Options: standard (avec limites), unlimited (sans limites), custom
bot_mode: standard

# Mode test (ne pas envoyer de vrais messages)
dry_run: false

# ═══════════════════════════════════════════════════════════════════
# NAVIGATEUR - Optimisé pour Pi 4 (économie RAM/CPU)
# ═══════════════════════════════════════════════════════════════════
browser:
  # Mode headless (sans interface graphique) - OBLIGATOIRE sur Pi 4
  headless: true

  # Ralentissement réduit pour meilleures performances sur Pi 4
  slow_mo: [0, 0]

  # Locale et fuseau horaire
  locale: fr-FR
  timezone: Europe/Paris

  # Un seul User-Agent (Linux ARM64) pour éviter la rotation
  user_agents:
  - Mozilla/5.0 (X11; Linux aarch64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36

  # Un seul viewport fixe
  viewport_sizes:
  - width: 1366
    height: 768

# ═══════════════════════════════════════════════════════════════════
# AUTHENTIFICATION
# ═══════════════════════════════════════════════════════════════════
auth:
  # Variable d'environnement contenant l'auth state
  auth_state_env_var: LINKEDIN_AUTH_STATE

  # Chemin du fichier auth state
  auth_file_path: auth_state.json

  # Chemin de secours (optionnel)
  auth_fallback_path:

# ═══════════════════════════════════════════════════════════════════
# LIMITES D'ENVOI DE MESSAGES - Optimisé (Audit Sécurité 2025)
# ═══════════════════════════════════════════════════════════════════
messaging_limits:
  # Limite par exécution (augmentée prudemment)
  max_messages_per_run: 15

  # Limite hebdomadaire augmentée à 100 (compromis sécurité/efficacité)
  # Justification: IP résidentielle Freebox + délais anti-détection excellents
  weekly_message_limit: 100

  # Limite quotidienne ajustée (100/7 ≈ 14/jour)
  daily_message_limit: 15

# ═══════════════════════════════════════════════════════════════════
# PLANIFICATION
# ═══════════════════════════════════════════════════════════════════
scheduling:
  # Heures de début et fin d'envoi (0-23)
  daily_start_hour: 7
  daily_end_hour: 19

  # Fuseau horaire pour la planification
  timezone: Europe/Paris

# ═══════════════════════════════════════════════════════════════════
# DÉLAIS ENTRE ACTIONS - Réduits pour Pi 4
# ═══════════════════════════════════════════════════════════════════
delays:
  # Délais entre messages réduits (économie temps + RAM)
  min_delay_seconds: 90   # 1.5 minutes
  max_delay_seconds: 180  # 3 minutes

  # Délais entre micro-actions
  action_delay_min: 0.5
  action_delay_max: 1.2

# ═══════════════════════════════════════════════════════════════════
# MESSAGES D'ANNIVERSAIRE
# ═══════════════════════════════════════════════════════════════════
messages:
  # Fichiers de messages
  messages_file: /app/data/messages.txt
  late_messages_file: /app/data/late_messages.txt

  # Années d'historique pour éviter la répétition
  avoid_repetition_years: 2

# ═══════════════════════════════════════════════════════════════════
# FILTRAGE DES ANNIVERSAIRES
# ═══════════════════════════════════════════════════════════════════
birthday_filter:
  # Traiter les anniversaires du jour
  process_today: true

  # Traiter les anniversaires en retard
  process_late: true

  # Nombre maximum de jours de retard (1-365)
  max_days_late: 10

# ═══════════════════════════════════════════════════════════════════
# PROXY - DÉSACTIVÉ (IP résidentielle Freebox suffisante)
# ═══════════════════════════════════════════════════════════════════
proxy:
  # Proxy désactivé: utilise IP Freebox Pop (résidentielle légitime)
  enabled: false

  # Rotation désactivée (économie mémoire)
  rotation_enabled: false

  # Fichier de configuration non utilisé
  config_file: proxy_config.json

# ═══════════════════════════════════════════════════════════════════
# DÉBOGAGE - Optimisé pour SD card Pi 4
# ═══════════════════════════════════════════════════════════════════
debug:
  # Désactiver debug avancé (économie CPU)
  advanced_debug: false

  # Screenshots viewport only (pas full-page) pour économie I/O
  save_screenshots: true

  # Désactiver sauvegarde HTML (économie espace SD)
  save_html: false

  # Niveau de logging (INFO sur Pi 4 pour éviter spam logs)
  log_level: INFO

# ═══════════════════════════════════════════════════════════════════
# BASE DE DONNÉES - Optimisée pour USB externe (meilleure performance)
# ═══════════════════════════════════════════════════════════════════
database:
  # Activer la base de données
  enabled: true

  # Base de données SQLite dans le volume partagé Docker
  # Compatible avec docker-compose.pi4-standalone.yml (shared-data volume)
  # IMPORTANT: Nom doit correspondre à DATABASE_URL dans .env (linkedin.db)
  db_path: /app/data/linkedin.db

  # Timeout réduit grâce à la clé USB (plus rapide que SD)
  timeout: 30

# ═══════════════════════════════════════════════════════════════════
# TIMEOUTS PLAYWRIGHT - Optimisés pour Raspberry Pi 4
# ═══════════════════════════════════════════════════════════════════
playwright:
  # Timeouts en millisecondes (ms)
  # Valeurs augmentées pour compenser la performance limitée du Pi 4

  # Timeout pour la navigation entre les pages (ex: goto, waitForNavigation)
  navigation_timeout: 120000    # 2 minutes (au lieu de 30s par défaut)

  # Timeout pour les actions d'authentification (login, 2FA)
  # Ces actions peuvent prendre plus de temps sur le Pi 4
  auth_action_timeout: 180000   # 3 minutes

  # Timeout pour les sélecteurs (waitForSelector, click, fill)
  selector_timeout: 30000       # 30 secondes (défaut Playwright)

  # Timeout pour les actions rapides (mouvements souris, scroll)
  quick_action_timeout: 10000   # 10 secondes

# ═══════════════════════════════════════════════════════════════════
# MONITORING
# ═══════════════════════════════════════════════════════════════════
monitoring:
  # Activer le monitoring
  enabled: false

  # Activer les métriques Prometheus
  prometheus_enabled: false

  # Port pour Prometheus
  prometheus_port: 9090

# ═══════════════════════════════════════════════════════════════════
# VISITOR - Visite automatique de profils LinkedIn
# ═══════════════════════════════════════════════════════════════════
visitor:
  # Activer la fonctionnalité de visite de profils
  enabled: true

  # Mots-clés pour la recherche de profils
  keywords: []

  # Localisation pour la recherche
  location: France

  # Limites
  limits:
    # Nombre de profils à visiter par exécution
    profiles_per_run: 15

    # Nombre maximum de pages de résultats à scraper
    max_pages_to_scrape: 100

    # Nombre max de pages sans nouveaux profils avant arrêt (1-50)
    max_pages_without_new: 10

  # Délais entre actions
  delays:
    # Délai général entre actions (secondes)
    min_seconds: 8
    max_seconds: 20

    # Temps de visite d'un profil (secondes)
    profile_visit_min: 15
    profile_visit_max: 35

    # Délai entre navigations de page (secondes)
    page_navigation_min: 3
    page_navigation_max: 6

  # Configuration des tentatives de retry
  retry:
    # Nombre maximum de tentatives par profil
    max_attempts: 3

    # Facteur d'augmentation du délai entre tentatives
    backoff_factor: 2
